<?plantuml 1.2026.2?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1594px" preserveAspectRatio="none" style="width:903px;height:1594px;background:#FFFFFF;" version="1.1" viewBox="0 0 903 1594" width="903px" zoomAndPan="magnify"><title>UC-01: Register Account &#8212; System Sequence Diagram</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="427.9434" x="233.6521" y="27.9951">UC-01: Register Account &#8212; System Sequence Diagram</text><g><title>Kleff System</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="209.1563"/></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="158.6641" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="484.3516"/></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="715.2813"/></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="1177.4063"/></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="200.7969" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="1278.8047"/></g><g><title>Authentik IdP</title><rect fill="#FFFFFF" height="187.7969" style="stroke:#181818;stroke-width:1;" width="10" x="691.5737" y="267.4219"/></g><g><title>Authentik IdP</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="691.5737" y="513.4844"/></g><g><title>Authentik IdP</title><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="691.5737" y="924.2109"/></g><g><title>Authentik IdP</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="691.5737" y="1307.9375"/></g><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="User" id="part1-lifeline"><g><title>Developer</title><rect fill="#000000" fill-opacity="0.00000" height="1362.7109" width="8" x="40.0015" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="44" x2="44" y1="134.8906" y2="1497.6016"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="System" id="part2-lifeline"><g><title>Kleff System</title><rect fill="#000000" fill-opacity="0.00000" height="1362.7109" width="8" x="367.3877" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="371.2891" x2="371.2891" y1="134.8906" y2="1497.6016"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Authentik" id="part3-lifeline"><g><title>Authentik IdP</title><rect fill="#000000" fill-opacity="0.00000" height="1362.7109" width="8" x="692.5737" y="134.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="695.7271" x2="695.7271" y1="134.8906" y2="1497.6016"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="User" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.0029" x="5" y="115.292">Developer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.834" x="19.5845" y="131.5889">(User)</text><ellipse cx="44.0015" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M44.0015,58.7969 L44.0015,85.7969 M31.0015,66.7969 L57.0015,66.7969 M44.0015,85.7969 L31.0015,100.7969 M44.0015,85.7969 L57.0015,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="User" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72.0029" x="5" y="1509.5967">Developer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.834" x="19.5845" y="1525.8936">(User)</text><ellipse cx="44.0015" cy="1537.6953" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M44.0015,1545.6953 L44.0015,1572.6953 M31.0015,1553.6953 L57.0015,1553.6953 M44.0015,1572.6953 L31.0015,1587.6953 M44.0015,1572.6953 L57.0015,1587.6953" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="System" id="part2-head"><rect fill="#E2E2F0" height="30.2969" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="102.1973" x="320.2891" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.1973" x="327.2891" y="123.5889">Kleff System</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="System" id="part2-tail"><rect fill="#E2E2F0" height="30.2969" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="102.1973" x="320.2891" y="1496.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.1973" x="327.2891" y="1516.5967">Kleff System</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Authentik" id="part3-head"><rect fill="#E2E2F0" height="30.2969" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="107.6934" x="642.7271" y="103.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.6934" x="649.7271" y="123.5889">Authentik IdP</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Authentik" id="part3-tail"><rect fill="#E2E2F0" height="30.2969" rx="5" ry="5" style="stroke:#181818;stroke-width:0.5;" width="107.6934" x="642.7271" y="1496.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.6934" x="649.7271" y="1516.5967">Authentik IdP</text></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="209.1563"/></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="158.6641" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="484.3516"/></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="715.2813"/></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="1177.4063"/></g><g><title>Kleff System</title><rect fill="#FFFFFF" height="200.7969" style="stroke:#181818;stroke-width:1;" width="10" x="366.3877" y="1278.8047"/></g><g><title>Authentik IdP</title><rect fill="#FFFFFF" height="187.7969" style="stroke:#181818;stroke-width:1;" width="10" x="691.5737" y="267.4219"/></g><g><title>Authentik IdP</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="691.5737" y="513.4844"/></g><g><title>Authentik IdP</title><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1;" width="10" x="691.5737" y="924.2109"/></g><g><title>Authentik IdP</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="691.5737" y="1307.9375"/></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2476" x="0" y="165.457"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="165.457" y2="165.457"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="168.457" y2="168.457"/><rect fill="#EEEEEE" height="23.1328" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="185.0313" x="355.6082" y="154.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166.5054" x="361.6082" y="170.9575">Main Success Scenario</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="354.3877,205.1563,364.3877,209.1563,354.3877,213.1563,358.3877,209.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="360.3877" y1="209.1563" y2="209.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.3125" x="51.0015" y="204.0903">clickSignUp()</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg2"><polygon fill="#181818" points="55.0015,234.2891,45.0015,238.2891,55.0015,242.2891,51.0015,238.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="370.3877" y1="238.2891" y2="238.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.0356" x="61.0015" y="233.2231">redirectToAuth(returnUrl)</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg3"><polygon fill="#181818" points="679.5737,263.4219,689.5737,267.4219,679.5737,271.4219,683.5737,267.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="685.5737" y1="267.4219" y2="267.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195.2793" x="51.0015" y="262.356">navigateToRegistrationForm()</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg4"><polygon fill="#181818" points="55.0015,292.5547,45.0015,296.5547,55.0015,300.5547,51.0015,296.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="690.5737" y1="296.5547" y2="296.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.7207" x="61.0015" y="291.4888">displayRegistrationForm()</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg5"><polygon fill="#181818" points="679.5737,321.6875,689.5737,325.6875,679.5737,329.6875,683.5737,325.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="685.5737" y1="325.6875" y2="325.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313.3076" x="51.0015" y="320.6216">submitRegistration(email, username, password)</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg6"><line style="stroke:#181818;stroke-width:2;" x1="701.5737" x2="743.5737" y1="354.8203" y2="354.8203"/><line style="stroke:#181818;stroke-width:2;" x1="743.5737" x2="743.5737" y1="354.8203" y2="367.8203"/><line style="stroke:#181818;stroke-width:2;" x1="702.5737" x2="743.5737" y1="367.8203" y2="367.8203"/><polygon fill="#181818" points="712.5737,363.8203,702.5737,367.8203,712.5737,371.8203,708.5737,367.8203" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.002" x="708.5737" y="349.7544">validateInput()</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg7"><polygon fill="#181818" points="55.0015,392.9531,45.0015,396.9531,55.0015,400.9531,51.0015,396.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="49.0015" x2="690.5737" y1="396.9531" y2="396.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.3765" x="61.0015" y="391.8872">sendVerificationEmail(email)</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg8"><polygon fill="#181818" points="679.5737,422.0859,689.5737,426.0859,679.5737,430.0859,683.5737,426.0859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="685.5737" y1="426.0859" y2="426.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195.6411" x="51.0015" y="421.02">verifyEmail(verificationToken)</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg9"><polygon fill="#181818" points="55.0015,451.2188,45.0015,455.2188,55.0015,459.2188,51.0015,455.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="695.5737" y1="455.2188" y2="455.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.8906" x="61.0015" y="450.1528">oidcCallback(authorizationCode, state)</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg10"><polygon fill="#181818" points="354.3877,480.3516,364.3877,484.3516,354.3877,488.3516,358.3877,484.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="360.3877" y1="484.3516" y2="484.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303.3862" x="51.0015" y="479.2856">handleOIDCCallback(authorizationCode, state)</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg11"><polygon fill="#181818" points="679.5737,509.4844,689.5737,513.4844,679.5737,517.4844,683.5737,513.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="376.3877" x2="685.5737" y1="513.4844" y2="513.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.7622" x="383.3877" y="508.4185">exchangeToken(authorizationCode)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg12"><polygon fill="#181818" points="387.3877,538.6172,377.3877,542.6172,387.3877,546.6172,383.3877,542.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="381.3877" x2="695.5737" y1="542.6172" y2="542.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291.186" x="393.3877" y="537.5513">tokens(accessToken, idToken, refreshToken)</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg13"><line style="stroke:#181818;stroke-width:2;" x1="376.3877" x2="418.3877" y1="571.75" y2="571.75"/><line style="stroke:#181818;stroke-width:2;" x1="418.3877" x2="418.3877" y1="571.75" y2="584.75"/><line style="stroke:#181818;stroke-width:2;" x1="377.3877" x2="418.3877" y1="584.75" y2="584.75"/><polygon fill="#181818" points="387.3877,580.75,377.3877,584.75,387.3877,588.75,383.3877,584.75" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.1704" x="383.3877" y="566.6841">getMe(accessToken)</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg14"><polygon fill="#181818" points="55.0015,609.8828,45.0015,613.8828,55.0015,617.8828,51.0015,613.8828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="365.3877" y1="613.8828" y2="613.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.5894" x="61.0015" y="608.8169">redirectToDashboard()</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg15"><polygon fill="#181818" points="55.0015,639.0156,45.0015,643.0156,55.0015,647.0156,51.0015,643.0156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="370.3877" y1="643.0156" y2="643.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.3521" x="61.0015" y="637.9497">displayDashboard(userProfile)</text></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2476" x="0" y="671.582"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="671.582" y2="671.582"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="674.582" y2="674.582"/><rect fill="#EEEEEE" height="23.1328" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="424.0078" x="236.1199" y="661.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="405.4819" x="242.1199" y="677.0825">Extension 2b: Access Protected Resource Without Auth</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg16"><polygon fill="#181818" points="354.3877,711.2813,364.3877,715.2813,354.3877,719.2813,358.3877,715.2813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="360.3877" y1="715.2813" y2="715.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.2412" x="51.0015" y="710.2153">navigateTo(/dashboard)</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg17"><line style="stroke:#181818;stroke-width:2;" x1="376.3877" x2="418.3877" y1="744.4141" y2="744.4141"/><line style="stroke:#181818;stroke-width:2;" x1="418.3877" x2="418.3877" y1="744.4141" y2="757.4141"/><line style="stroke:#181818;stroke-width:2;" x1="377.3877" x2="418.3877" y1="757.4141" y2="757.4141"/><polygon fill="#181818" points="387.3877,753.4141,377.3877,757.4141,387.3877,761.4141,383.3877,757.4141" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.6348" x="383.3877" y="739.3481">checkAuthentication()</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg18"><polygon fill="#181818" points="55.0015,782.5469,45.0015,786.5469,55.0015,790.5469,51.0015,786.5469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="370.3877" y1="786.5469" y2="786.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250.3071" x="61.0015" y="781.481">redirectToAuth(returnUrl=/dashboard)</text></g><path d="M376,804.5469 L376,849.5469 A5,5 0 0 0 381,854.5469 L592,854.5469 A5,5 0 0 0 597,849.5469 L597,809.5469 L587,799.5469 L381,799.5469 A5,5 0 0 0 376,804.5469" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M587,799.5469 L587,807.0469 A2.5,2.5 0 0 0 589.5,809.5469 L597,809.5469 L587,799.5469" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.5435" x="382" y="816.6138">ProtectedRoute detects</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.7612" x="382" y="831.7466">!isAuthenticated and redirects</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.2432" x="382" y="846.8794">to /auth/signin with return URL</text><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2476" x="0" y="880.5117"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="880.5117" y2="880.5117"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="883.5117" y2="883.5117"/><rect fill="#EEEEEE" height="23.1328" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="329.4976" x="283.375" y="869.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="310.9717" x="289.375" y="886.0122">Exception 7a: Authentik Validation Failure</text><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg19"><polygon fill="#181818" points="679.5737,920.2109,689.5737,924.2109,679.5737,928.2109,683.5737,924.2109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="685.5737" y1="924.2109" y2="924.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.7842" x="51.0015" y="919.145">submitRegistration(invalidData)</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg20"><line style="stroke:#181818;stroke-width:2;" x1="701.5737" x2="743.5737" y1="953.3438" y2="953.3438"/><line style="stroke:#181818;stroke-width:2;" x1="743.5737" x2="743.5737" y1="953.3438" y2="966.3438"/><line style="stroke:#181818;stroke-width:2;" x1="702.5737" x2="743.5737" y1="966.3438" y2="966.3438"/><polygon fill="#181818" points="712.5737,962.3438,702.5737,966.3438,712.5737,970.3438,708.5737,966.3438" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.002" x="708.5737" y="948.2778">validateInput()</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg21"><polygon fill="#181818" points="55.0015,991.4766,45.0015,995.4766,55.0015,999.4766,51.0015,995.4766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="695.5737" y1="995.4766" y2="995.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.9834" x="61.0015" y="990.4106">displayValidationError(reason)</text></g><path d="M701,1013.4766 L701,1073.4766 A5,5 0 0 0 706,1078.4766 L886,1078.4766 A5,5 0 0 0 891,1073.4766 L891,1018.4766 L881,1008.4766 L706,1008.4766 A5,5 0 0 0 701,1013.4766" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M881,1008.4766 L881,1015.9766 A2.5,2.5 0 0 0 883.5,1018.4766 L891,1018.4766 L881,1008.4766" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.0835" x="707" y="1025.5435">Possible errors:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.6572" x="707" y="1040.6763">- Email already registered</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.7515" x="707" y="1055.8091">- Password too weak</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169.2476" x="707" y="1070.9419">- Username already taken</text><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2476" x="0" y="1104.5742"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="1104.5742" y2="1104.5742"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="1107.5742" y2="1107.5742"/><rect fill="#EEEEEE" height="23.1328" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="266.5161" x="314.8657" y="1094.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="247.9902" x="320.8657" y="1110.0747">Exception 9a: OIDC Callback Error</text><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg22"><polygon fill="#181818" points="55.0015,1144.2734,45.0015,1148.2734,55.0015,1152.2734,51.0015,1148.2734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="695.5737" y1="1148.2734" y2="1148.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.8042" x="61.0015" y="1143.2075">oidcCallback(error=access_denied)</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg23"><polygon fill="#181818" points="354.3877,1173.4063,364.3877,1177.4063,354.3877,1181.4063,358.3877,1177.4063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="360.3877" y1="1177.4063" y2="1177.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.751" x="51.0015" y="1172.3403">handleOIDCCallback(error)</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg24"><polygon fill="#181818" points="55.0015,1202.5391,45.0015,1206.5391,55.0015,1210.5391,51.0015,1206.5391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="370.3877" y1="1206.5391" y2="1206.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193.0068" x="61.0015" y="1201.4731">displayAuthError("Try Again")</text></g><rect fill="#EEEEEE" height="3" rx="5" ry="5" style="stroke:#EEEEEE;stroke-width:1;" width="896.2476" x="0" y="1235.1055"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="1235.1055" y2="1235.1055"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="896.2476" y1="1238.1055" y2="1238.1055"/><rect fill="#EEEEEE" height="23.1328" rx="5" ry="5" style="stroke:#000000;stroke-width:2;" width="284.1182" x="306.0647" y="1224.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="265.5923" x="312.0647" y="1240.606">Exception 14b: Deactivated Account</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg25"><polygon fill="#181818" points="354.3877,1274.8047,364.3877,1278.8047,354.3877,1282.8047,358.3877,1278.8047" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="44.0015" x2="360.3877" y1="1278.8047" y2="1278.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303.3862" x="51.0015" y="1273.7388">handleOIDCCallback(authorizationCode, state)</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg26"><polygon fill="#181818" points="679.5737,1303.9375,689.5737,1307.9375,679.5737,1311.9375,683.5737,1307.9375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;" x1="376.3877" x2="685.5737" y1="1307.9375" y2="1307.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.7622" x="383.3877" y="1302.8716">exchangeToken(authorizationCode)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg27"><polygon fill="#181818" points="387.3877,1333.0703,377.3877,1337.0703,387.3877,1341.0703,383.3877,1337.0703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="381.3877" x2="695.5737" y1="1337.0703" y2="1337.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1982" x="393.3877" y="1332.0044">tokens(accessToken)</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg28"><line style="stroke:#181818;stroke-width:2;" x1="376.3877" x2="418.3877" y1="1366.2031" y2="1366.2031"/><line style="stroke:#181818;stroke-width:2;" x1="418.3877" x2="418.3877" y1="1366.2031" y2="1379.2031"/><line style="stroke:#181818;stroke-width:2;" x1="377.3877" x2="418.3877" y1="1379.2031" y2="1379.2031"/><polygon fill="#181818" points="387.3877,1375.2031,377.3877,1379.2031,387.3877,1383.2031,383.3877,1379.2031" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.1704" x="383.3877" y="1361.1372">getMe(accessToken)</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg29"><line style="stroke:#181818;stroke-width:2;" x1="376.3877" x2="418.3877" y1="1408.3359" y2="1408.3359"/><line style="stroke:#181818;stroke-width:2;" x1="418.3877" x2="418.3877" y1="1408.3359" y2="1421.3359"/><line style="stroke:#181818;stroke-width:2;" x1="377.3877" x2="418.3877" y1="1421.3359" y2="1421.3359"/><polygon fill="#181818" points="387.3877,1417.3359,377.3877,1421.3359,387.3877,1425.3359,383.3877,1421.3359" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.4663" x="383.3877" y="1403.27">ensureUserFromToken()</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg30"><polygon fill="#181818" points="55.0015,1446.4688,45.0015,1450.4688,55.0015,1454.4688,51.0015,1450.4688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="365.3877" y1="1450.4688" y2="1450.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220.1685" x="61.0015" y="1445.4028">error(403, "account deactivated")</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg31"><polygon fill="#181818" points="55.0015,1475.6016,45.0015,1479.6016,55.0015,1483.6016,51.0015,1479.6016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:2;stroke-dasharray:2,2;" x1="49.0015" x2="370.3877" y1="1479.6016" y2="1479.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.6572" x="61.0015" y="1474.5356">redirectTo(/error/deactivated)</text></g><?plantuml-src rLR1RXen4BtlLqmvxKeWaZHILIGg8KYag8qQ1KWlbIfZ3s2nsDJsGkYf7z4lx9Tqx5tO9LaISknjsNqpy-PvvXadNOemxhVEpZjmZpDf7HheSQupvU3lxpymtDAh9GpnPuQA8mmacncsZ2Axa6h5w15iyQrdZDwCvf8l55eB5nM8eNo2QwCe-_bP537kj8760DUOwXMQxoeUMpH90vW5_nHHd9DShXZnQ7nESJejg0H8_dW8wcLkZih91To8ku3QlucYRXTkcLGmp3Ztv8OS5JDIGxSRHRuWj3xjUkq0Jwc9ePofyIfEF5cvPWvtLGjOYo92P0SC2ccGkv7s9ME3BZDgRD8a4lWqUb-jvDi1nTPoHg2HpW_1C2UrkjPcMQrVzbF6LbW8QLSfszPagArfiybIkYewnYMJQHCoGYksn2QicBKRRKHIhNYOPirIAOZTZLfbBdu2B9XPLE81ZPnA7WfT-JfvjQIMszg3jpbiNGaSwGMgfBvzBGNlipITCBw86I6qaRz2L5yBwiKwOdbm8fNvU3O2SwP4Ybzl1lqJSXwRaCEcy95JrXc69fvdE-6Wz-oSJs5Z5eOvv6k25CM3mQb1Eo-qgk-tPBZFEKDtYzMKoOkJFc1sFj7CYBWELynY2V8pTMVqLAPOknMqe5UFZfeYDU1Yql4cv1ULOXpLGq7sP7Lco8A-IL8kSw6T-lqjrobkYns5buwftFmvyiLEftpcukGD6z-jrgjfKr4tOEHixa3l72s2iijxQWn1eFzbwSCxQIjiI0KQotrn3t0QsdwKsfRiYWnkG-90JWV6zryYsZpmHGk5EQvyJ_21TIgp-P3liFzmJIkN6JpGzHNNa2fum80vzjeCdsmTpoQff7X5rumXnPdLHyVxKERo0ocjhPKJklJGfx4TUjM2O3J0KaegjgHUVW-Y21_l2WyagJLia2t2st7XaViensXbZidzaUJsNW8xCu7GHL3vTJCBLBlvPluGg2IAv2J72e6dN625o9vABczZPBRGcz6LsJY-hhlkpYzfNmTxaDZ_WQXTpl_DMO_CsDiSj8AYzBHWNfPhevSvvJgB2OSNNvwzRqA35OAMJ4JZPLkAso6-NOceEyX_?></g></svg>